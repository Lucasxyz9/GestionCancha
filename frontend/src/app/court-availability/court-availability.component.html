<div class="container">
  <h1>Disponibilidad de Canchas</h1>

  <div class="date-picker-container">
    <mat-form-field appearance="fill">
      <mat-label>Seleccione una fecha</mat-label>
      <input matInput [matDatepicker]="picker" [(ngModel)]="selectedDate" (dateChange)="onDateChange()">
      <mat-datepicker-toggle matSuffix [for]="picker">
        <mat-icon matDatepickerToggleIcon>calendar_today</mat-icon>
      </mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>
  </div>

  <mat-divider></mat-divider>

  <div class="current-date">
    <h2>{{ selectedDate | date:'EEEE, d \'de\' MMMM yyyy' | titlecase }}</h2>
  </div>

  <div class="table-container">
    <table mat-table [dataSource]="timeSlots" class="mat-elevation-z8">
      <!-- Columna Hora -->
      <ng-container matColumnDef="hora">
        <th mat-header-cell *matHeaderCellDef>Hora</th>
        <td mat-cell *matCellDef="let element" class="time-cell">{{ element.hora }}</td>
      </ng-container>

      <!-- Cancha 1 -->
      <ng-container matColumnDef="cancha1">
        <th mat-header-cell *matHeaderCellDef class="cancha-header cancha-1">Cancha 1</th>
        <td mat-cell *matCellDef="let element" class="cancha-cell cancha-1">
          <span class="{{getAvailabilityClass(element.cancha1)}}">
            {{ element.cancha1 ? 'Disponible' : 'Ocupada' }}
          </span>
          <button mat-icon-button *ngIf="element.cancha1" (click)="reservar('cancha1', element.hora)">
            <mat-icon>add_circle_outline</mat-icon>
          </button>
        </td>
      </ng-container>

      <!-- Cancha 2 -->
      <ng-container matColumnDef="cancha2">
        <th mat-header-cell *matHeaderCellDef class="cancha-header cancha-2">Cancha 2</th>
        <td mat-cell *matCellDef="let element" class="cancha-cell cancha-2">
          <span class="{{getAvailabilityClass(element.cancha2)}}">
            {{ element.cancha2 ? 'Disponible' : 'Ocupada' }}
          </span>
          <button mat-icon-button *ngIf="element.cancha2" (click)="reservar('cancha2', element.hora)">
            <mat-icon>add_circle_outline</mat-icon>
          </button>
        </td>
      </ng-container>

      <!-- Cancha 3 -->
      <ng-container matColumnDef="cancha3">
        <th mat-header-cell *matHeaderCellDef class="cancha-header cancha-3">Cancha 3</th>
        <td mat-cell *matCellDef="let element" class="cancha-cell cancha-3">
          <span class="{{getAvailabilityClass(element.cancha3)}}">
            {{ element.cancha3 ? 'Disponible' : 'Ocupada' }}
          </span>
          <button mat-icon-button *ngIf="element.cancha3" (click)="reservar('cancha3', element.hora)">
            <mat-icon>add_circle_outline</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

  <div class="legend">
    <div class="legend-item">
      <span class="legend-color disponible"></span>
      <span>Disponible</span>
    </div>
    <div class="legend-item">
      <span class="legend-color ocupada"></span>
      <span>Ocupada</span>
    </div>
  </div>

  <div class="note">
    <p>Para reservar, haga clic en el icono <mat-icon>add_circle_outline</mat-icon> junto a la cancha disponible</p>
  </div>
</div>