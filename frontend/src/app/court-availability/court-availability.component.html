<div class="container">
  <mat-form-field appearance="fill">
    <mat-label>Seleccionar fecha</mat-label>
    <input matInput [matDatepicker]="picker" [value]="selectedDate" (dateChange)="onDateChange($event)">
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
  </mat-form-field>

  <table mat-table [dataSource]="horas" class="mat-elevation-z8 disponibilidad-table">

    <!-- Columna de horas -->
    <ng-container matColumnDef="hora">
      <th mat-header-cell *matHeaderCellDef>Hora</th>
      <td mat-cell *matCellDef="let hora">{{ hora }}</td>
    </ng-container>

    <!-- Columnas dinÃ¡micas para cada cancha -->
    <ng-container *ngFor="let cancha of canchas" [matColumnDef]="'cancha-' + cancha.idCancha">
      <th mat-header-cell *matHeaderCellDef>
        {{ cancha.nombre}} 
        <span *ngIf="isEnMantenimiento(cancha)" class="mantenimiento">(Mantenimiento)</span>
      </th>
      <td mat-cell *matCellDef="let hora"
          [ngClass]="getClaseCelda(cancha.idCancha, hora)"
          (click)="mostrarReservas(cancha.idCancha, hora)">
        {{ getTextoEstado(cancha.idCancha, hora) }}
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

  <!-- Panel de detalles de reserva -->
  <div *ngIf="mostrarDetalle && reservasSeleccionadas.length > 0" class="detalle-reservas">
    <h3>Detalles de reserva</h3>
    <div *ngFor="let r of reservasSeleccionadas" class="reserva-item">
      <strong>Cliente:</strong> {{ r.cliente.nombre }}<br>
      <strong>Cancha:</strong> {{ r.cancha.canchaNombre }}<br>
      <strong>Hora:</strong> {{ r.horaInicio }} - {{ r.horaFin }}<br>
      <strong>Usuario:</strong> {{ r.usuario.nombre }}<br>
    </div>
  </div>
</div>
